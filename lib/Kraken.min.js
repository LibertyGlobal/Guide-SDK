/*! Kraken 2013-06-21 */
"undefined"==typeof exports&&(this.kraken={}),function(a){a.config={APIURL:"http://appdev.io/kraken/v2/schedule/",region:""}}("undefined"==typeof exports?this.kraken:exports),function(a){a.utils={addFactory:function(a){a.create=function(){return new a}}}}("undefined"==typeof exports?this.kraken:exports),function(a){a.jsonp=function(){function a(a,b){var c=document.createElement("script"),e=!1;c.src=a,c.async=!0;var f=b||g.error;"function"==typeof f&&(c.onerror=function(b){f({url:a,event:b})}),c.onload=c.onreadystatechange=function(){e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,c.onload=c.onreadystatechange=null,c&&c.parentNode&&c.parentNode.removeChild(c))},d||(d=document.getElementsByTagName("head")[0]),d.appendChild(c)}function b(a){return encodeURIComponent(a)}function c(c,d,h,i){var j,k=-1===(c||"").indexOf("?")?"?":"&";i=i||g.callbackName||"callback";var l=i+"_json"+ ++e;d=d||{};for(j in d)d.hasOwnProperty(j)&&(k+=b(j)+"="+b(d[j])+"&");return f[l]=function(a){h(a);try{delete f[l]}catch(b){}f[l]=null},a(c+k+i+"="+l),l}var d,e=0,f=this,g={};return c}()}("undefined"==typeof exports?this.kraken:exports),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Object.create||(Object.create=function(){function a(){}return function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}()),function(a){a.AbstractField=function(a){this.name=a,this.operations=[]};var b=a.AbstractField.prototype;b.toString=function(){return this.name},b.getStringForOperation=function(a,b){return this.name+a+b}}("undefined"==typeof exports?this.kraken:exports),function(a){a.NumericField=function(b){a.AbstractField.call(this,b)};var b=a.NumericField.prototype=Object.create(a.AbstractField.prototype);b.equalTo=function(a){return this.getStringForOperation("=",a)},b.greaterThan=function(a){return this.getStringForOperation(">",a)},b.lessThan=function(a){return this.getStringForOperation("<",a)}}("undefined"==typeof exports?this.kraken:exports),function(a){a.TextField=function(b){a.AbstractField.call(this,b)};var b=a.TextField.prototype=Object.create(a.AbstractField.prototype);b.equalTo=function(a){return this.getStringForOperation("=",a)},b.isMatching=function(a){return this.getStringForOperation("~",a)}}("undefined"==typeof exports?this.kraken:exports),function(a){a.Request=function(){this.initialRequestURL="",this.nextBatchLink=""};var b=a.Request.prototype;b.execute=function(b,c){a.jsonp(b,{},c)},b.proceedResponse=function(){}}("undefined"==typeof exports?this.kraken:exports),function(a){a.Collection=function(){this.items=[]};var b=a.Collection.prototype;b.each=function(a){for(var b=0;b<this.items.length;b++)a.apply(this,[this.items[b],b])},b.where=function(a){var b=[];this.each(function(c){for(var d in a)c[d]===a[d]&&b.push(c[d])})},b.add=function(a){a instanceof Array?this.items=this.items.concat(a):this.items.push(a)},b.get=function(a){return this.items[a]}}("undefined"==typeof exports?this.kraken:exports),function(a){a.EntityBase=function(){a.Collection.call(this),this._URLelements=[],this._requestURL="",this._baseURL="",this._request=new a.Request};var b=a.EntityBase.prototype=Object.create(a.Collection.prototype);b.limit=function(a){return this._addURLElement("maxBatchSize="+a),this},b.fields=function(){this.addURLElement("show=");for(var a=0;a<arguments.length;a++)this._addURLElement(arguments[a]);return this},b.sort=function(a,b){return void 0===b&&(b="asc"),this._addURLElement("sort="+a+"("+b+")"),this},b.filter=function(){for(var a=0;a<arguments.length;a++)this._addURLElement(arguments[a]);return this},b.findOne=function(a){return this._buildURLFromElements(),this._request.execute(this._requestURL,this._createScopedCallback(a),1),this},b.findNext=function(a){return this._request.execute(this._request.nextBatchLink||this._buildURLFromElements(),this._createScopedCallback(a),1),this},b.findAll=function(a){return this._buildURLFromElements(),this._request.execute(this._requestURL,this._createScopedCallback(a),0),this},b._addURLElement=function(a){this._URLelements.push(a)},b._buildURLFromElements=function(){this._requestURL=a.config.APIURL,""!==a.config.region&&(this._requestURL+="regions/"+a.config.region+"/"),this._requestURL+=this._baseURL;for(var b=0;b<this._URLelements.length;b++)this._requestURL+=this._URLelements[b],b<this._URLelements.length-1&&(this._requestURL+="&");return this._requestURL},b._processData=function(a){this.add(a.data)},b._createScopedCallback=function(a){var b=function(b){this._processData(b),a.bind(this)(b)};return b.bind(this)}}("undefined"==typeof exports?this.kraken:exports),function(a){a.Country=function(){a.EntityBase.call(this),this._baseURL="regions.json"},a.utils.addFactory(a.Country),a.Country.prototype=Object.create(a.EntityBase.prototype)}("undefined"==typeof exports?this.kraken:exports),function(a){a.City=function(){a.EntityBase.call(this),this._baseURL="regions.json"},a.utils.addFactory(a.City),a.City.prototype=Object.create(a.EntityBase.prototype)}("undefined"==typeof exports?this.kraken:exports),function(a){a.Channel=function(){a.EntityBase.call(this),this._baseURL="channels.json?"},a.utils.addFactory(a.Channel),a.Channel.prototype=Object.create(a.EntityBase.prototype)}("undefined"==typeof exports?this.kraken:exports),function(a){a.Broadcast=function(){a.EntityBase.call(this),this._baseURL="broadcasts.json?"},a.utils.addFactory(a.Broadcast),a.Broadcast.prototype=Object.create(a.EntityBase.prototype)}("undefined"==typeof exports?this.kraken:exports);